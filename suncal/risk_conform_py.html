<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Suncal - Probability of Conformance</title>
  <link rel="stylesheet" href="style/risk.css" />
  <link rel="stylesheet" href="https://pyscript.net/releases/2024.3.2/core.css">
  <script type="module" src="https://pyscript.net/releases/2024.3.2/core.js"></script>
  <script type="module">
    const loading = document.getElementById('loading');
    addEventListener('py:ready', () => loading.close());
    loading.showModal();
  </script>
</head>

<body>
  <dialog id="loading">
    <h2>Loading...</h2>
  </dialog>
  <div class="container">
    <h1>Suncal Web - Probability of Conformance</h1>
  </div>

  <div class="risk-grid" style="margin-top: 2em; margin-bottom: 2em;">
    <div class="risk-grid-child">
      <table>
        <tr>
          <td>
            <input type="checkbox" id="LowLimitEnable" py-change="calculate" checked>
            <label for="LowLimitEnable" id="LowLLabel">Lower Specification Limit:&nbsp</label>
          </td>
          <td><input type="number" py-change="calculate" value="-1" step="0.1" id="LowL" name="LowL"
              style="border: 1px solid;"></td>
        </tr>
        <tr>
          <td>
            <input type="checkbox" id="UpLimitEnable" py-change="calculate" checked>
            <label for="UpLimitEnable" id="UpLLabel">Upper Specification Limit:&nbsp</label>
          </td>
          <td><input type="number" py-change="calculate" value="1" step="0.1" id="UpL" name="UpL"
              style="border: 1px solid;"></td>
        </tr>
        <tr>
          <td>Measurement Standard Deviation</td>
          <td><input type="number" py-change="calculate" value=".125" step="0.001" id="stdev"
               style="border: 1px solid;"></td>
        </tr>
        <tr>
          <td>Measurement Bias</td>
          <td><input type="number" py-change="calculate" value="0" step="0.001" id="bias"
               style="border: 1px solid;"></td>
        </tr>
      </table>

      <div id="Guardband" style="margin-top: 2em;">
        <input type="checkbox" id="guardband" name="guardband" py-change="calculate">
        <label for="guardband">Guardband:</label><br>
        <table>
          <tr>
            <td><label for="lowerGuard" id="lowerGuardLabel">Lower Guardband:&nbsp</label></td>
            <td><input type="text" py-change="calculate" value="-.9" step="0.01" id="lowerGuard" name="lowerGuard" disabled
                style="border: 1px solid;"></td>
          </tr>
          <tr>
            <td><label for="upperGuard" id="upperGuardLabel">Upper Guardband:&nbsp</label></td>
            <td><input type="text" py-change="calculate" value=".9" step="0.01" id="upperGuard" name="upperGuard" disabled
                style="border: 1px solid;"></td>
          </tr>
        </table>
      </div>

      <div id="GuardbandCalc" style="margin-top: 2em;">
        <p>Guardbanding Methods</p>
        <details>
          <summary>TUR-based</summary>
          <button class="gbbutton" id="dobbert" py-click="calc_guardband">Managed 2% ("Method 6")</button><br>
          <button class="gbbutton" id="rss" py-click="calc_guardband">Root-difference-of-squares</button>
          <button class="gbbutton" id="rp10" py-click="calc_guardband">NCSLI RP-10</button>
          <button class="gbbutton" id="test" py-click="calc_guardband">95% Test Uncertainty</button>
        </details>
        <details>
          <summary>Worst-Case Specific Risk</summary>
          <input type="number" value="90" min="0" max="100" step="0.01" id="worstspecific" name="worstspecific"
            style="border: 1px solid; width: 188px;">
          <button class="gbbutton" id="specific" py-click="calc_guardband">Calculate</button>
        </details>
      </div>
    </div>

    <div class="risk-grid-child">
      <div id="plot">
        <p>Initializing...</p>
      </div>
      <div id="output" style="padding-top: 1em;">
      </div>
    </div>
  </div>

  <br><br>
  <div class="footer" style="padding-top: 3em;">
    <p><a href="index.html">Suncal-Web Home</a></p>
  </div>
  <script type="py" src="src/risk_conform.py" config='{"packages": ["ziaplot"]}'></script>
</body>
</html>